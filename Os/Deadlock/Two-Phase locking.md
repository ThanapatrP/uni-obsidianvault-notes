Locking mechanism for concurrency problem
##### Phase 1
Try to lock all resource it needs, if needed resource is locked, start over until it's unlock

##### Phase 2
Use gained resource and release the lock after finish using